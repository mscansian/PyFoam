

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PyFoam.RunDictionary.SolutionDirectory &mdash; PyFoam 0.6.6 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="PyFoam 0.6.6 documentation" href="../../../index.html"/>
        <link rel="up" title="PyFoam" href="../../PyFoam.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> PyFoam
          

          
          </a>

          
            
            
              <div class="version">
                0.6.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/modules.html">API documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">PyFoam</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Module code</a> &raquo;</li>
      
          <li><a href="../../PyFoam.html">PyFoam</a> &raquo;</li>
      
    <li>PyFoam.RunDictionary.SolutionDirectory</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for PyFoam.RunDictionary.SolutionDirectory</h1><div class="highlight"><pre>
<span></span><span class="c1">#  ICE Revision: $Id$</span>
<span class="sd">&quot;&quot;&quot;Working with a solution directory&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">PyFoam.Basics.Utilities</span> <span class="kn">import</span> <span class="n">Utilities</span>
<span class="kn">from</span> <span class="nn">PyFoam.Basics.BasicFile</span> <span class="kn">import</span> <span class="n">BasicFile</span>
<span class="kn">from</span> <span class="nn">PyFoam.Error</span> <span class="kn">import</span> <span class="n">warning</span><span class="p">,</span><span class="n">error</span>
<span class="kn">from</span> <span class="nn">PyFoam</span> <span class="kn">import</span> <span class="n">configuration</span> <span class="k">as</span> <span class="n">conf</span>

<span class="kn">from</span> <span class="nn">PyFoam.RunDictionary.TimeDirectory</span> <span class="kn">import</span> <span class="n">TimeDirectory</span>
<span class="kn">from</span> <span class="nn">PyFoam.RunDictionary.ParsedParameterFile</span> <span class="kn">import</span> <span class="n">ParsedParameterFile</span><span class="p">,</span><span class="n">WriteParameterFile</span>

<span class="kn">from</span> <span class="nn">PyFoam.Basics.DataStructures</span> <span class="kn">import</span> <span class="n">DictProxy</span>

<span class="kn">from</span> <span class="nn">PyFoam.ThirdParty.six</span> <span class="kn">import</span> <span class="n">print_</span>

<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">listdir</span><span class="p">,</span><span class="n">path</span><span class="p">,</span><span class="n">mkdir</span><span class="p">,</span><span class="n">stat</span><span class="p">,</span><span class="n">environ</span>
<span class="kn">from</span> <span class="nn">platform</span> <span class="kn">import</span> <span class="n">uname</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">asctime</span>
<span class="kn">from</span> <span class="nn">stat</span> <span class="kn">import</span> <span class="n">ST_CTIME</span>
<span class="kn">import</span> <span class="nn">tarfile</span><span class="o">,</span><span class="nn">fnmatch</span><span class="o">,</span><span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">re</span><span class="o">,</span><span class="nn">os</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">getlogin</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">PyFoam.ThirdParty.winhacks</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Unable to import the getlogin function.&quot;</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">sys</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<div class="viewcode-block" id="SolutionDirectory"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory">[docs]</a><span class="k">class</span> <span class="nc">SolutionDirectory</span><span class="p">(</span><span class="n">Utilities</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents a solution directory</span>

<span class="sd">    In the solution directory subdirectories whose names are numbers</span>
<span class="sd">    are assumed to be solutions for a specific time-step&quot;&quot;&quot;</span>

<div class="viewcode-block" id="SolutionDirectory.__init__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span>
                 <span class="n">archive</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">paraviewLink</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="n">parallel</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">addLocalConfig</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">tolerant</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param name: Name of the solution directory</span>
<span class="sd">        :param archive: name of the directory where the lastToArchive-method</span>
<span class="sd">        should copy files, if None no archive is created. Deprecated as it was never used</span>
<span class="sd">        :param paraviewLink: Create a symbolic link controlDict.foam for paraview</span>
<span class="sd">        :param tolerant: do not fail for minor inconsistencies</span>
<span class="sd">        :param parallel: use the first processor-subdirectory for the authorative information</span>
<span class="sd">        :param region: Mesh region for multi-region cases&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="o">=</span><span class="bp">None</span>
        <span class="k">if</span> <span class="n">archive</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">archive</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="p">):</span>
                <span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="o">=</span><span class="n">region</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backups</span><span class="o">=</span><span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="o">=</span><span class="n">parallel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tolerant</span><span class="o">=</span><span class="n">tolerant</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastReread</span><span class="o">=</span><span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dirPrefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">processorDirs</span><span class="p">()</span> <span class="ow">and</span> <span class="n">parallel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dirPrefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processorDirs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">essential</span><span class="o">=</span><span class="nb">set</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">systemDir</span><span class="p">(),</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">()])</span>

        <span class="c1"># only add the initial directory if no template exists</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;0.org&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">initialDir</span><span class="p">()</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">initialDir</span><span class="p">())</span>

        <span class="c1"># PyFoam-specific</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;PyFoamHistory&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;customRegexp&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;LocalConfigPyFoam&quot;</span><span class="p">)</span>

        <span class="c1"># this usually comes with the tutorials</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;Allclean&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;Allrun&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;*.ipynb&quot;</span><span class="p">)</span>

        <span class="n">emptyFoamFile</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;.foam&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">paraviewLink</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">emptyFoamFile</span><span class="p">):</span>
            <span class="n">dummy</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">emptyFoamFile</span><span class="p">,</span><span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="c1"># equivalent to touch</span>

        <span class="k">if</span> <span class="n">addLocalConfig</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLocalConfig</span><span class="p">()</span>

        <span class="c1"># These are used by PrepareCase</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;*.org&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;*.template&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;*.sh&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;*.parameters&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;derivedParameters.py&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;*.postTemplate&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="s2">&quot;*.finalTemplate&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__postprocDirs</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="o">=</span><span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addPostprocDir</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addPostprocDir</span><span class="p">(</span><span class="s2">&quot;postProcessing&quot;</span><span class="p">,</span><span class="n">fail</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.regions"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.regions">[docs]</a>    <span class="k">def</span> <span class="nf">regions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Detect sub-region cases by looking through constant and finding</span>
<span class="sd">        directories with polyMesh-directories&quot;&quot;&quot;</span>
        <span class="n">regions</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">()):</span>
            <span class="n">fName</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">(),</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">fName</span><span class="p">):</span>
                <span class="n">pF</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fName</span><span class="p">,</span><span class="s2">&quot;polyMesh&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pF</span><span class="p">)</span> <span class="ow">and</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">pF</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                        <span class="n">regions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># sub-regions. Do they even exist?</span>
                        <span class="n">regions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="p">,</span><span class="n">f</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">regions</span></div>

<div class="viewcode-block" id="SolutionDirectory.setToParallel"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.setToParallel">[docs]</a>    <span class="k">def</span> <span class="nf">setToParallel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Use the parallel times instead of the serial.</span>

<span class="sd">        Used to reset the behaviour after it has been set by the constructor&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;is already in parallel mode&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="o">=</span><span class="bp">True</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">processorDirs</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dirPrefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processorDirs</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.addLocalConfig"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.addLocalConfig">[docs]</a>    <span class="k">def</span> <span class="nf">addLocalConfig</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the local configuration file of the case to the configuration&quot;&quot;&quot;</span>
        <span class="n">fName</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;LocalConfigPyFoam&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fName</span><span class="p">):</span>
            <span class="n">conf</span><span class="p">()</span><span class="o">.</span><span class="n">addFile</span><span class="p">(</span><span class="n">fName</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.__len__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.__len__">[docs]</a>    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.__contains__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.__contains__">[docs]</a>    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeName</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span></div>

<div class="viewcode-block" id="SolutionDirectory.__getitem__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.__getitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>

        <span class="n">ind</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeName</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ind</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">TimeDirectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullPath</span><span class="p">(</span><span class="n">ind</span><span class="p">),</span> <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.__setitem__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.__setitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">)</span><span class="o">!=</span><span class="nb">str</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">key</span><span class="p">),</span><span class="s2">&quot;of&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;is not &#39;str&#39;&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">!=</span><span class="n">TimeDirectory</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">),</span><span class="s2">&quot;is not TimeDirectory&quot;</span><span class="p">)</span>

        <span class="n">dest</span><span class="o">=</span><span class="n">TimeDirectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullPath</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="n">create</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="p">)</span>
        <span class="n">dest</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.__delitem__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.__delitem__">[docs]</a>    <span class="k">def</span> <span class="nf">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="n">nm</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeName</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nm</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullPath</span><span class="p">(</span><span class="n">nm</span><span class="p">)),</span><span class="n">ignore_errors</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">(</span><span class="n">force</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.__iter__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.__iter__">[docs]</a>    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">TimeDirectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">fullPath</span><span class="p">(</span><span class="n">key</span><span class="p">),</span>
                                <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="p">,</span>
                                <span class="n">tolerant</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tolerant</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.timeName"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.timeName">[docs]</a>    <span class="k">def</span> <span class="nf">timeName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">,</span><span class="n">minTime</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the name of a directory that corresponds with the given parameter</span>
<span class="sd">        :param item: the time that should be found</span>
<span class="sd">        :param minTime: search for the time with the minimal difference.</span>
<span class="sd">        Otherwise an exact match will be searched&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item</span><span class="p">)</span><span class="o">==</span><span class="nb">int</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">item</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ind</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="n">minTime</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ind</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span></div>

<div class="viewcode-block" id="SolutionDirectory.timeIndex"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.timeIndex">[docs]</a>    <span class="k">def</span> <span class="nf">timeIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">item</span><span class="p">,</span><span class="n">minTime</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Finds the index of a directory that corresponds with the given parameter</span>
<span class="sd">        :param item: the time that should be found</span>
<span class="sd">        :param minTime: search for the time with the minimal difference.</span>
<span class="sd">        Otherwise an exact match will be searched&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>

        <span class="n">time</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="n">result</span><span class="o">=</span><span class="bp">None</span>

        <span class="k">if</span> <span class="n">minTime</span><span class="p">:</span>
            <span class="n">result</span><span class="o">=</span><span class="mi">0</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">)):</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">result</span><span class="p">])</span><span class="o">-</span><span class="n">time</span><span class="p">)</span><span class="o">&gt;</span><span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">-</span><span class="n">time</span><span class="p">):</span>
                    <span class="n">result</span><span class="o">=</span><span class="n">i</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">)):</span>
                <span class="n">t</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">-</span><span class="n">time</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">1e-6</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">result</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
                        <span class="n">result</span><span class="o">=</span><span class="n">i</span>
                    <span class="k">elif</span> <span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">-</span><span class="n">time</span><span class="p">)</span><span class="o">&lt;</span><span class="nb">abs</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="n">result</span><span class="p">])</span><span class="o">-</span><span class="n">time</span><span class="p">):</span>
                        <span class="n">result</span><span class="o">=</span><span class="n">i</span>

        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="SolutionDirectory.fullPath"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.fullPath">[docs]</a>    <span class="k">def</span> <span class="nf">fullPath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">time</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirPrefix</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dirPrefix</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">time</span></div>

<div class="viewcode-block" id="SolutionDirectory.isValid"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.isValid">[docs]</a>    <span class="k">def</span> <span class="nf">isValid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks whether this is a valid case directory by looking for</span>
<span class="sd">        the system- and constant-directories and the controlDict-file&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">missingFiles</span><span class="p">())</span><span class="o">==</span><span class="mi">0</span></div>

<div class="viewcode-block" id="SolutionDirectory.missingFiles"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.missingFiles">[docs]</a>    <span class="k">def</span> <span class="nf">missingFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a list of all the missing files and directories that</span>
<span class="sd">        are needed for a valid case&quot;&quot;&quot;</span>
        <span class="n">missing</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">systemDir</span><span class="p">()):</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">systemDir</span><span class="p">())</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">systemDir</span><span class="p">()):</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">systemDir</span><span class="p">())</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">()):</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">())</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">()):</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">())</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="p">()):</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">missing</span></div>

<div class="viewcode-block" id="SolutionDirectory.addToClone"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.addToClone">[docs]</a>    <span class="k">def</span> <span class="nf">addToClone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;add directory to the list that is needed to clone this case</span>
<span class="sd">        :param name: name of the subdirectory (the case directory is prepended)&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">name</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">essential</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">name</span><span class="p">))</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;processor0&quot;</span><span class="p">,</span><span class="n">name</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">essential</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">name</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># check whether this is a file pattern</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">name</span><span class="p">)):</span>
                <span class="c1"># no check for existence necessary</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">essential</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.cloneCase"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.cloneCase">[docs]</a>    <span class="k">def</span> <span class="nf">cloneCase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">svnRemove</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">followSymlinks</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;create a clone of this case directory. Remove the target directory, if it already exists</span>

<span class="sd">        :param name: Name of the new case directory</span>
<span class="sd">        :param svnRemove: Look for .svn-directories and remove them</span>
<span class="sd">        :param followSymlinks: Follow symbolic links instead of just copying them</span>
<span class="sd">        :rtype: :class:`SolutionDirectory` or correct subclass</span>
<span class="sd">        :return: The target directory&quot;&quot;&quot;</span>

        <span class="n">additional</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">conf</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Cloning&quot;</span><span class="p">,</span><span class="s2">&quot;addItem&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">additional</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">mkdir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrProcs</span><span class="p">()):</span>
                <span class="n">mkdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;processor</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">essential</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
                <span class="n">fs</span><span class="o">=</span><span class="n">followSymlinks</span>
                <span class="k">if</span> <span class="n">fs</span><span class="p">:</span>
                    <span class="n">noForce</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">conf</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Cloning&quot;</span><span class="p">,</span><span class="s2">&quot;noForceSymlink&quot;</span><span class="p">))</span>
                    <span class="n">pth</span><span class="p">,</span><span class="n">fl</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">noForce</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">fl</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                            <span class="n">fs</span><span class="o">=</span><span class="bp">False</span>
                            <span class="k">break</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
                    <span class="n">pth</span><span class="p">,</span><span class="n">fl</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pth</span><span class="p">,</span><span class="s2">&quot;processor0&quot;</span><span class="p">,</span><span class="n">fl</span><span class="p">)):</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrProcs</span><span class="p">()):</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pth</span><span class="p">,</span><span class="s2">&quot;processor</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span><span class="n">fl</span><span class="p">),</span>
                                          <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;processor</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">),</span>
                                          <span class="n">symlinks</span><span class="o">=</span><span class="ow">not</span> <span class="n">fs</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">symlinks</span><span class="o">=</span><span class="ow">not</span> <span class="n">fs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">svnRemove</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;find &quot;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot; -name .svn -exec rm -rf {} </span><span class="se">\\</span><span class="s2">; -prune&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">archive</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.symlinkCase"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.symlinkCase">[docs]</a>    <span class="k">def</span> <span class="nf">symlinkCase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                    <span class="n">name</span><span class="p">,</span>
                    <span class="n">followSymlinks</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                    <span class="n">maxLevel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">relPath</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;create a clone of this case directory by creating a</span>
<span class="sd">        directory with symbolic links</span>

<span class="sd">        :param name: Name of the new case directory</span>
<span class="sd">        :param maxLevel: Maximum level down to which directories are created instead of symbolically linked</span>
<span class="sd">        :param followSymlinks: Follow symbolic links instead of just copying them</span>
<span class="sd">        :param relPath: the created symbolic links are relative (instead of absolute)</span>
<span class="sd">        :rtype: :class:`SolutionDirectory` or correct subclass</span>
<span class="sd">        :return: The target directory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">here</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">polyDirs</span><span class="o">=</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">here</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;polyMesh*&quot;</span><span class="p">,</span><span class="n">here</span><span class="p">)]</span>

        <span class="n">additional</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">conf</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Cloning&quot;</span><span class="p">,</span><span class="s2">&quot;addItem&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">additional</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">mkdir</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">toProcess</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">essential</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
                    <span class="n">pth</span><span class="p">,</span><span class="n">fl</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pth</span><span class="p">,</span><span class="s2">&quot;processor0&quot;</span><span class="p">,</span><span class="n">fl</span><span class="p">)):</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrProcs</span><span class="p">()):</span>
                            <span class="n">toProcess</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;processor</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
                    <span class="n">toProcess</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">here</span><span class="p">))</span>

        <span class="n">maxLevel</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">maxLevel</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__symlinkDir</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">here</span><span class="p">,</span>
                          <span class="n">dest</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">name</span><span class="p">),</span>
                          <span class="n">toProcess</span><span class="o">=</span><span class="n">toProcess</span><span class="p">,</span>
                          <span class="n">maxLevel</span><span class="o">=</span><span class="n">maxLevel</span><span class="p">,</span>
                          <span class="n">relPath</span><span class="o">=</span><span class="n">relPath</span><span class="p">,</span>
                          <span class="n">polyDirs</span><span class="o">=</span><span class="n">polyDirs</span><span class="p">,</span>
                          <span class="n">symlinks</span><span class="o">=</span><span class="ow">not</span> <span class="n">followSymlinks</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">archive</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__symlinkDir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">src</span><span class="p">,</span><span class="n">dest</span><span class="p">,</span><span class="n">toProcess</span><span class="p">,</span><span class="n">maxLevel</span><span class="p">,</span><span class="n">relPath</span><span class="p">,</span><span class="n">polyDirs</span><span class="p">,</span><span class="n">symlinks</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">toProcess</span><span class="p">:</span>
            <span class="n">there</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
            <span class="n">here</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">there</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">symlinks</span><span class="p">:</span>
                <span class="n">there</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">there</span><span class="p">)</span>

            <span class="n">doSymlink</span><span class="o">=</span><span class="bp">False</span>
            <span class="n">done</span><span class="o">=</span><span class="bp">False</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">there</span><span class="p">):</span>
                <span class="n">doSymlink</span><span class="o">=</span><span class="bp">True</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">src</span><span class="p">)</span><span class="o">==</span><span class="s2">&quot;polyMesh&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">f</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;blockMeshDict&quot;</span><span class="p">,</span><span class="s2">&quot;blockMeshDict.gz&quot;</span><span class="p">]:</span>
                        <span class="n">doSymlink</span><span class="o">=</span><span class="bp">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">poly</span><span class="o">=</span><span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">polyDirs</span> <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="n">f</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">maxLevel</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">done</span><span class="o">=</span><span class="bp">True</span>
                    <span class="n">mkdir</span><span class="p">(</span><span class="n">here</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__symlinkDir</span><span class="p">(</span><span class="n">src</span><span class="o">=</span><span class="n">there</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="n">here</span><span class="p">,</span>
                                      <span class="n">toProcess</span><span class="o">=</span><span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">there</span><span class="p">)</span> <span class="k">if</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span><span class="p">],</span>
                                      <span class="n">maxLevel</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">maxLevel</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                                      <span class="n">relPath</span><span class="o">=</span><span class="n">relPath</span><span class="p">,</span>
                                      <span class="n">polyDirs</span><span class="o">=</span><span class="p">[</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="o">*</span><span class="n">p</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">poly</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">))</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">],</span>
                                      <span class="n">symlinks</span><span class="o">=</span><span class="n">symlinks</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">doSymlink</span><span class="o">=</span><span class="bp">True</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">doSymlink</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">relPath</span><span class="p">:</span>
                        <span class="n">linkTo</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">there</span><span class="p">,</span><span class="n">dest</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">linkTo</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">there</span><span class="p">)</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">symlink</span><span class="p">(</span><span class="n">linkTo</span><span class="p">,</span><span class="n">here</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">there</span><span class="p">,</span><span class="n">here</span><span class="p">,</span><span class="n">symlinks</span><span class="o">=</span><span class="n">symlinks</span><span class="p">)</span>

<div class="viewcode-block" id="SolutionDirectory.packCase"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.packCase">[docs]</a>    <span class="k">def</span> <span class="nf">packCase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tarname</span><span class="p">,</span><span class="n">last</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="p">[],</span><span class="n">additional</span><span class="o">=</span><span class="p">[],</span><span class="n">base</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Packs all the important files into a compressed tarfile.</span>
<span class="sd">        Uses the essential-list and excludes the .svn-directories.</span>
<span class="sd">        Also excludes files ending with ~</span>
<span class="sd">        :param tarname: the name of the tar-file</span>
<span class="sd">        :param last: add the last directory to the list of directories to be added</span>
<span class="sd">        :param exclude: List with additional glob filename-patterns to be excluded</span>
<span class="sd">        :param additional: List with additional glob filename-patterns</span>
<span class="sd">        that are to be added</span>
<span class="sd">        :param base: Different name that is to be used as the baseName for the case inside the tar&quot;&quot;&quot;</span>

        <span class="n">ex</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;*~&quot;</span><span class="p">,</span><span class="s2">&quot;.svn&quot;</span><span class="p">]</span><span class="o">+</span><span class="n">exclude</span>
        <span class="n">members</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">essential</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">last</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLast</span><span class="p">()</span><span class="o">!=</span><span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">:</span>
                <span class="n">members</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">latestDir</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">additional</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">f</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">members</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">p</span><span class="p">):</span>
                    <span class="n">members</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">))</span>

        <span class="n">tar</span><span class="o">=</span><span class="n">tarfile</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">tarname</span><span class="p">,</span><span class="s2">&quot;w:gz&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addToTar</span><span class="p">(</span><span class="n">tar</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="n">ex</span><span class="p">,</span><span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>

        <span class="n">additional</span><span class="o">=</span><span class="nb">eval</span><span class="p">(</span><span class="n">conf</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Cloning&quot;</span><span class="p">,</span><span class="s2">&quot;addItem&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">additional</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addToTar</span><span class="p">(</span><span class="n">tar</span><span class="p">,</span>
                          <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">a</span><span class="p">),</span>
                          <span class="n">exclude</span><span class="o">=</span><span class="n">ex</span><span class="p">,</span>
                          <span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>

        <span class="n">tar</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="SolutionDirectory.addToTar"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.addToTar">[docs]</a>    <span class="k">def</span> <span class="nf">addToTar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">tar</span><span class="p">,</span><span class="n">pattern</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="p">[],</span><span class="n">base</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The workhorse for the packCase-method&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">base</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">base</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">pattern</span><span class="p">):</span>
            <span class="n">excluded</span><span class="o">=</span><span class="bp">False</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">exclude</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fnmatch</span><span class="o">.</span><span class="n">fnmatch</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">name</span><span class="p">),</span><span class="n">e</span><span class="p">):</span>
                    <span class="n">excluded</span><span class="o">=</span><span class="bp">True</span>
            <span class="k">if</span> <span class="n">excluded</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">addToTar</span><span class="p">(</span><span class="n">tar</span><span class="p">,</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">m</span><span class="p">),</span><span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span><span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">arcname</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base</span><span class="p">,</span><span class="n">name</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:])</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
                    <span class="c1"># if the symbolic link points to a file in the case keep it</span>
                    <span class="c1"># otherwise replace with the real file</span>
                    <span class="n">lPath</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">os</span><span class="o">.</span><span class="n">readlink</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">lPath</span><span class="p">):</span>
                        <span class="n">rPath</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                        <span class="n">common</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">commonprefix</span><span class="p">([</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">rPath</span><span class="p">),</span>
                                                  <span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base</span><span class="p">)])</span>
                        <span class="c1"># if the path is shorter than the base it must be outside the case</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">common</span><span class="p">)</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">base</span><span class="p">)):</span>
                            <span class="n">name</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">rPath</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># use the abolute path</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">lPath</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">tar</span><span class="o">.</span><span class="n">getmember</span><span class="p">(</span><span class="n">arcname</span><span class="p">)</span>
                    <span class="c1"># don&#39;t add ... the file is already there&#39;</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="c1"># file not in tar</span>
                    <span class="n">tar</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">arcname</span><span class="o">=</span><span class="n">arcname</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.getParallelTimes"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getParallelTimes">[docs]</a>    <span class="k">def</span> <span class="nf">getParallelTimes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a list of the times in the processor0-directory&quot;&quot;&quot;</span>
        <span class="n">result</span><span class="o">=</span><span class="p">[]</span>

        <span class="n">proc0</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;processor0&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">proc0</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">proc0</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>
        <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="SolutionDirectory.reread"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.reread">[docs]</a>    <span class="k">def</span> <span class="nf">reread</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">force</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Rescan the directory for the time directories&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span> <span class="ow">and</span> <span class="n">stat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)[</span><span class="n">ST_CTIME</span><span class="p">]</span><span class="o">&lt;=</span><span class="bp">self</span><span class="o">.</span><span class="n">lastReread</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="o">=</span><span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">firstParallel</span><span class="o">=</span><span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last</span><span class="o">=</span><span class="bp">None</span>
        <span class="n">procDirs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processorDirs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">procNr</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">procDirs</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">procDirs</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span><span class="p">:</span>
            <span class="n">timesDir</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">procDirs</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timesDir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">timesDir</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">lastReread</span><span class="o">=</span><span class="n">stat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)[</span><span class="n">ST_CTIME</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parallel</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">procDirs</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">parTimes</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">procDirs</span><span class="p">[</span><span class="mi">0</span><span class="p">])):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                    <span class="n">parTimes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parTimes</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">firstParallel</span><span class="o">=</span><span class="nb">min</span><span class="p">(</span><span class="n">parTimes</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.processorDirs"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.processorDirs">[docs]</a>    <span class="k">def</span> <span class="nf">processorDirs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List with the processor directories&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">procDirs</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">procDirs</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;processor[0-9]+&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">procDirs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">procDirs</span></div>

<div class="viewcode-block" id="SolutionDirectory.nrProcs"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.nrProcs">[docs]</a>    <span class="k">def</span> <span class="nf">nrProcs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The number of directories with processor-data&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">procNr</span></div>

<div class="viewcode-block" id="SolutionDirectory.getTimes"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getTimes">[docs]</a>    <span class="k">def</span> <span class="nf">getTimes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; :return: List of all the available times&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span></div>

<div class="viewcode-block" id="SolutionDirectory.addBackup"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.addBackup">[docs]</a>    <span class="k">def</span> <span class="nf">addBackup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pth</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;add file to list of files that are to be copied to the</span>
<span class="sd">        archive&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backups</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">pth</span><span class="p">))</span></div>

<div class="viewcode-block" id="SolutionDirectory.getFirst"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getFirst">[docs]</a>    <span class="k">def</span> <span class="nf">getFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:return: the first time for which a solution exists</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span></div>

<div class="viewcode-block" id="SolutionDirectory.getLast"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getLast">[docs]</a>    <span class="k">def</span> <span class="nf">getLast</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:return: the last time for which a solution exists</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">last</span></div>

<div class="viewcode-block" id="SolutionDirectory.lastToArchive"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.lastToArchive">[docs]</a>    <span class="k">def</span> <span class="nf">lastToArchive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;copy the last solution (plus the backup-files to the</span>
<span class="sd">        archive)</span>

<span class="sd">        :param name: name of the sub-directory in the archive&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Warning: nor Archive-directory&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>
        <span class="n">fname</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">archive</span><span class="p">,</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fname</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
        <span class="n">mkdir</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">last</span><span class="p">),</span><span class="n">fname</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">backups</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">copytree</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">fname</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.clearResults"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.clearResults">[docs]</a>    <span class="k">def</span> <span class="nf">clearResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                     <span class="n">after</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                     <span class="n">removeProcs</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">keepLast</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">vtk</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                     <span class="n">keepRegular</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">keepParallel</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">keepInterval</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                     <span class="n">functionObjectData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                     <span class="n">additional</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;remove all time-directories after a certain time. If not time ist</span>
<span class="sd">        set the initial time is used</span>
<span class="sd">        :param after: time after which directories ar to be removed</span>
<span class="sd">        :param removeProcs: if True the processorX-directories are removed.</span>
<span class="sd">        Otherwise the timesteps after last are removed from the</span>
<span class="sd">        processor-directories</span>
<span class="sd">        :param keepLast: Keep the data from the last timestep</span>
<span class="sd">        :param keepInterval: if set: keep timesteps that are this far apart</span>
<span class="sd">        :param vtk: Remove the VTK-directory if it exists</span>
<span class="sd">        :param keepRegular: keep all the times (only remove processor and other stuff)</span>
<span class="sd">        :param functionObjectData: tries do determine which data was written by function obejects and removes it</span>
<span class="sd">        :param additional: List with glob-patterns that are removed too&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>

        <span class="n">last</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getLast</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">after</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">time</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The first timestep in&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot; is &quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">,</span><span class="s2">&quot;not a number. Doing nothing&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">time</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">after</span><span class="p">)</span>

        <span class="n">lastKeptIndex</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mf">1e5</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">keepInterval</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">keepInterval</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">error</span><span class="p">(</span><span class="s2">&quot;The keeping interval&quot;</span><span class="p">,</span><span class="n">keepInterval</span><span class="p">,</span><span class="s2">&quot;is smaller that 0&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">keepRegular</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">times</span><span class="p">:</span>
                <span class="n">keep</span><span class="o">=</span><span class="bp">False</span>
                <span class="k">if</span> <span class="n">keepInterval</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
                    <span class="n">thisIndex</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">+</span><span class="mf">1e-10</span><span class="p">)</span><span class="o">/</span><span class="n">keepInterval</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">thisIndex</span><span class="o">!=</span><span class="n">lastKeptIndex</span><span class="p">:</span>
                        <span class="n">keep</span><span class="o">=</span><span class="bp">True</span>
                <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">&gt;</span><span class="n">time</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">keepLast</span> <span class="ow">and</span> <span class="n">f</span><span class="o">==</span><span class="n">last</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">keep</span><span class="p">:</span>
                    <span class="c1">#                   print &quot;Removing&quot;,path.join(self.name,f)</span>
                    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">)):</span>
                        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                            <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">))</span>
                <span class="k">elif</span> <span class="n">keepInterval</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
                    <span class="n">lastKeptIndex</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">+</span><span class="mf">1e-10</span><span class="p">)</span><span class="o">/</span><span class="n">keepInterval</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;VTK&quot;</span><span class="p">))</span> <span class="ow">and</span> <span class="n">vtk</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;VTK&quot;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;VTK&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nrProcs</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">keepParallel</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">firstParallel</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">lastKeptIndex</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="o">-</span><span class="mf">1e5</span><span class="p">)</span>
            <span class="n">time</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">time</span><span class="p">,</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">firstParallel</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;processor[0-9]+&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">removeProcs</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                            <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">pDir</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">pDir</span><span class="p">):</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">keep</span><span class="o">=</span><span class="bp">False</span>
                                <span class="n">val</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">keepInterval</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
                                    <span class="n">thisIndex</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">+</span><span class="mf">1e-10</span><span class="p">)</span><span class="o">/</span><span class="n">keepInterval</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">thisIndex</span><span class="o">!=</span><span class="n">lastKeptIndex</span><span class="p">:</span>
                                        <span class="n">keep</span><span class="o">=</span><span class="bp">True</span>
                                <span class="k">if</span> <span class="n">val</span><span class="o">&gt;</span><span class="n">time</span> <span class="ow">and</span> <span class="ow">not</span> <span class="p">(</span><span class="n">keepLast</span> <span class="ow">and</span> <span class="n">t</span><span class="o">==</span><span class="n">last</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">keep</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pDir</span><span class="p">,</span><span class="n">t</span><span class="p">)):</span>
                                        <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                                            <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pDir</span><span class="p">,</span><span class="n">t</span><span class="p">))</span>
                                        <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pDir</span><span class="p">,</span><span class="n">t</span><span class="p">))</span>
                                <span class="k">elif</span> <span class="n">keepInterval</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
                                    <span class="n">lastKeptIndex</span><span class="o">=</span><span class="nb">int</span><span class="p">((</span><span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span><span class="o">+</span><span class="mf">1e-10</span><span class="p">)</span><span class="o">/</span><span class="n">keepInterval</span><span class="p">)</span>
                            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                                <span class="k">pass</span>

        <span class="k">if</span> <span class="n">functionObjectData</span><span class="p">:</span>
            <span class="n">cd</span><span class="o">=</span><span class="n">ParsedParameterFile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">controlDict</span><span class="p">(),</span><span class="n">doMacroExpansion</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;functions&quot;</span> <span class="ow">in</span> <span class="n">cd</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">cd</span><span class="p">[</span><span class="s2">&quot;functions&quot;</span><span class="p">])</span> <span class="ow">in</span> <span class="p">[</span><span class="n">DictProxy</span><span class="p">,</span><span class="nb">dict</span><span class="p">]:</span>
                    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cd</span><span class="p">[</span><span class="s2">&quot;functions&quot;</span><span class="p">]:</span>
                        <span class="n">pth</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pth</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                                <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="n">pth</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">pth</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">cd</span><span class="p">[</span><span class="s2">&quot;functions&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">]:</span>
                        <span class="n">pth</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pth</span><span class="p">):</span>
                            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                                <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="n">pth</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">pth</span><span class="p">)</span>

        <span class="n">additional</span><span class="o">+=</span><span class="nb">eval</span><span class="p">(</span><span class="n">conf</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="s2">&quot;additionalpatterns&quot;</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">additional</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clearPattern</span><span class="p">(</span><span class="n">a</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.clearPattern"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.clearPattern">[docs]</a>    <span class="k">def</span> <span class="nf">clearPattern</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">globPat</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear all files that fit a certain shell (glob) pattern</span>
<span class="sd">        :param glob: the pattern which the files are going to fit&quot;&quot;&quot;</span>

        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">globPat</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
                <span class="n">print_</span><span class="p">(</span><span class="s2">&quot;Clearing&quot;</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="n">ignore_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">unlink</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.clearOther"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.clearOther">[docs]</a>    <span class="k">def</span> <span class="nf">clearOther</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">pyfoam</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                   <span class="n">removeAnalyzed</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                   <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                   <span class="n">clearHistory</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                   <span class="n">clearParameters</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove additional directories</span>
<span class="sd">        :param pyfoam: rremove all directories typically created by PyFoam&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">pyfoam</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clearPattern</span><span class="p">(</span><span class="s2">&quot;PyFoam.?*&quot;</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">removeAnalyzed</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clearPattern</span><span class="p">(</span><span class="s2">&quot;*?.analyzed&quot;</span><span class="p">,</span>
                                  <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clearParameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clearPattern</span><span class="p">(</span><span class="s2">&quot;PyFoamPrepareCaseParameters&quot;</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">clearHistory</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clearPattern</span><span class="p">(</span><span class="s2">&quot;PyFoamHistory&quot;</span><span class="p">,</span>
                              <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.clear"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
              <span class="n">after</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">processor</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">pyfoam</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">keepLast</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">vtk</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">verbose</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">keepRegular</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">keepParallel</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">keepInterval</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">removeAnalyzed</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">clearHistory</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">clearParameters</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">functionObjectData</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">additional</span><span class="o">=</span><span class="p">[]):</span>
        <span class="sd">&quot;&quot;&quot;One-stop-shop to remove data</span>
<span class="sd">        :param after: time after which directories ar to be removed</span>
<span class="sd">        :param processor: remove the processorXX directories</span>
<span class="sd">        :param pyfoam: rremove all directories typically created by PyFoam</span>
<span class="sd">        :param keepLast: Keep the last time-step</span>
<span class="sd">        :param additional: list with additional patterns to clear&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearResults</span><span class="p">(</span><span class="n">after</span><span class="o">=</span><span class="n">after</span><span class="p">,</span>
                          <span class="n">removeProcs</span><span class="o">=</span><span class="n">processor</span><span class="p">,</span>
                          <span class="n">keepLast</span><span class="o">=</span><span class="n">keepLast</span><span class="p">,</span>
                          <span class="n">keepInterval</span><span class="o">=</span><span class="n">keepInterval</span><span class="p">,</span>
                          <span class="n">vtk</span><span class="o">=</span><span class="n">vtk</span><span class="p">,</span>
                          <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">,</span>
                          <span class="n">keepRegular</span><span class="o">=</span><span class="n">keepRegular</span><span class="p">,</span>
                          <span class="n">keepParallel</span><span class="o">=</span><span class="n">keepParallel</span><span class="p">,</span>
                          <span class="n">functionObjectData</span><span class="o">=</span><span class="n">functionObjectData</span><span class="p">,</span>
                          <span class="n">additional</span><span class="o">=</span><span class="n">additional</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearOther</span><span class="p">(</span><span class="n">pyfoam</span><span class="o">=</span><span class="n">pyfoam</span><span class="p">,</span>
                        <span class="n">removeAnalyzed</span><span class="o">=</span><span class="n">removeAnalyzed</span><span class="p">,</span>
                        <span class="n">clearParameters</span><span class="o">=</span><span class="n">clearParameters</span><span class="p">,</span>
                        <span class="n">clearHistory</span><span class="o">=</span><span class="n">clearHistory</span><span class="p">,</span>
                        <span class="n">verbose</span><span class="o">=</span><span class="n">verbose</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.initialDir"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.initialDir">[docs]</a>    <span class="k">def</span> <span class="nf">initialDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:return: the name of the first time-directory (==initial</span>
<span class="sd">        conditions)</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">first</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;0.org&quot;</span><span class="p">)):</span>
                <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;0.org&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">None</span></div>

<div class="viewcode-block" id="SolutionDirectory.latestDir"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.latestDir">[docs]</a>    <span class="k">def</span> <span class="nf">latestDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:return: the name of the first last-directory (==simulation</span>
<span class="sd">        results)</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reread</span><span class="p">()</span>

        <span class="n">last</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">getLast</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">last</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">last</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span></div>

<div class="viewcode-block" id="SolutionDirectory.constantDir"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.constantDir">[docs]</a>    <span class="k">def</span> <span class="nf">constantDir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">processor</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param region: Specify the region for cases with more than 1 mesh</span>
<span class="sd">        :param processor: name of the processor directory</span>
<span class="sd">        :return: the name of the C{constant}-directory</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="n">pre</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">processor</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">processor</span><span class="p">)</span><span class="o">==</span><span class="nb">int</span><span class="p">:</span>
                <span class="n">processor</span><span class="o">=</span><span class="s2">&quot;processor</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">processor</span>
            <span class="n">pre</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span><span class="n">processor</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">region</span><span class="o">==</span><span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span>
        <span class="k">if</span> <span class="n">region</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span><span class="s2">&quot;constant&quot;</span><span class="p">,</span><span class="n">region</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span><span class="s2">&quot;constant&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.systemDir"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.systemDir">[docs]</a>    <span class="k">def</span> <span class="nf">systemDir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param region: Specify the region for cases with more than 1 mesh</span>
<span class="sd">        :return: the name of the C{system}-directory</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">region</span><span class="o">==</span><span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span>
        <span class="k">if</span> <span class="n">region</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;system&quot;</span><span class="p">,</span><span class="n">region</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;system&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.controlDict"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.controlDict">[docs]</a>    <span class="k">def</span> <span class="nf">controlDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:return: the name of the C{controlDict}</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">systemDir</span><span class="p">(),</span><span class="s2">&quot;controlDict&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.polyMeshDir"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.polyMeshDir">[docs]</a>    <span class="k">def</span> <span class="nf">polyMeshDir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">processor</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param region: Specify the region for cases with more than 1 mesh</span>
<span class="sd">        :return: the name of the C{polyMesh}</span>
<span class="sd">        :param time: Time for which the  mesh should be looked at</span>
<span class="sd">        :param processor: Name of the processor directory for decomposed cases</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">region</span><span class="o">==</span><span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span>
        <span class="k">if</span> <span class="n">time</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">(</span>
                    <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
                    <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">),</span>
                <span class="s2">&quot;polyMesh&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">TimeDirectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                              <span class="n">time</span><span class="p">,</span>
                              <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span>
                              <span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;polyMesh&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.boundaryDict"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.boundaryDict">[docs]</a>    <span class="k">def</span> <span class="nf">boundaryDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">processor</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param region: Specify the region for cases with more than 1 mesh</span>
<span class="sd">        :return: name of the C{boundary}-file</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">region</span><span class="o">==</span><span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span>
        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polyMeshDir</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">,</span><span class="n">time</span><span class="o">=</span><span class="n">time</span><span class="p">,</span><span class="n">processor</span><span class="o">=</span><span class="n">processor</span><span class="p">),</span><span class="s2">&quot;boundary&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.blockMesh"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.blockMesh">[docs]</a>    <span class="k">def</span> <span class="nf">blockMesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param region: Specify the region for cases with more than 1 mesh</span>
<span class="sd">        :return: the name of the C{blockMeshDict} if it exists. Returns</span>
<span class="sd">        an empty string if it doesn&#39;t</span>
<span class="sd">        :rtype: str&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">region</span><span class="o">==</span><span class="bp">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">region</span><span class="o">!=</span><span class="bp">None</span><span class="p">:</span>
            <span class="n">region</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">region</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">systemDir</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">),</span><span class="bp">self</span><span class="o">.</span><span class="n">polyMeshDir</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">)]:</span>
            <span class="n">p</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="s2">&quot;blockMeshDict&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">p</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>

<div class="viewcode-block" id="SolutionDirectory.makeFile"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.makeFile">[docs]</a>    <span class="k">def</span> <span class="nf">makeFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;create a file in the solution directory and return a</span>
<span class="sd">        corresponding BasicFile-object</span>

<span class="sd">        :param name: Name of the file</span>
<span class="sd">        :rtype: :class:`BasicFile`&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">BasicFile</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="SolutionDirectory.getRegions"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getRegions">[docs]</a>    <span class="k">def</span> <span class="nf">getRegions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">defaultRegion</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gets a list of all the available mesh regions by checking all</span>
<span class="sd">        directories in constant and using all those that have a polyMesh-subdirectory</span>
<span class="sd">        :param defaultRegion: should the default region also be added (as None)&quot;&quot;&quot;</span>
        <span class="n">lst</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">listDirectory</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">()):</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">constantDir</span><span class="p">(),</span><span class="n">d</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polyMeshDir</span><span class="p">(</span><span class="n">region</span><span class="o">=</span><span class="n">d</span><span class="p">)):</span>
                    <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">defaultRegion</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">polyMeshDir</span><span class="p">()):</span>
                <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>

        <span class="n">lst</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">lst</span></div>

<div class="viewcode-block" id="SolutionDirectory.addToHistory"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.addToHistory">[docs]</a>    <span class="k">def</span> <span class="nf">addToHistory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">*</span><span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a line with date and username to a file &#39;PyFoamHistory&#39;</span>
<span class="sd">        that resides in the local directory&quot;&quot;&quot;</span>
        <span class="n">hist</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;PyFoamHistory&quot;</span><span class="p">),</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># this seems to fail when no stdin is available</span>
            <span class="n">username</span><span class="o">=</span><span class="n">getlogin</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
            <span class="n">username</span><span class="o">=</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;USER&quot;</span><span class="p">]</span>

        <span class="n">hist</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> by </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%s</span><span class="s2"> :&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">asctime</span><span class="p">(),</span><span class="n">username</span><span class="p">,</span><span class="n">uname</span><span class="p">()[</span><span class="mi">1</span><span class="p">]))</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">hist</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">t</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">)</span>

        <span class="n">hist</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">hist</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="SolutionDirectory.listFiles"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.listFiles">[docs]</a>    <span class="k">def</span> <span class="nf">listFiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">directory</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;List all the plain files (not directories) in a subdirectory</span>
<span class="sd">        of the case</span>
<span class="sd">        :param directory: the subdirectory. If unspecified the</span>
<span class="sd">        case-directory itself is used</span>
<span class="sd">        :return: List with the plain filenames&quot;&quot;&quot;</span>

        <span class="n">result</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">theDir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="n">theDir</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">directory</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">theDir</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;.&#39;</span> <span class="ow">and</span> <span class="n">f</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">!=</span><span class="s1">&#39;~&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">f</span><span class="p">)):</span>
                    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="SolutionDirectory.getDictionaryText"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getDictionaryText">[docs]</a>    <span class="k">def</span> <span class="nf">getDictionaryText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param directory: Sub-directory of the case</span>
<span class="sd">        :param name: name of the dictionary file</span>
<span class="sd">        :return: the contents of the file as a big string&quot;&quot;&quot;</span>

        <span class="n">result</span><span class="o">=</span><span class="bp">None</span>
        <span class="n">theDir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="n">theDir</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">directory</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">name</span><span class="p">)):</span>
            <span class="n">result</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">name</span><span class="p">))</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warning</span><span class="p">(</span><span class="s2">&quot;File&quot;</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;does not exist in directory&quot;</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="s2">&quot;of case&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="SolutionDirectory.writeDictionaryContents"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.writeDictionaryContents">[docs]</a>    <span class="k">def</span> <span class="nf">writeDictionaryContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">contents</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Writes the contents of a dictionary</span>
<span class="sd">        :param directory: Sub-directory of the case</span>
<span class="sd">        :param name: name of the dictionary file</span>
<span class="sd">        :param contents: Python-dictionary with the dictionary contents&quot;&quot;&quot;</span>

        <span class="n">theDir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="n">theDir</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">directory</span><span class="p">)</span>

        <span class="n">result</span><span class="o">=</span><span class="n">WriteParameterFile</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">name</span><span class="p">))</span>
        <span class="n">result</span><span class="o">.</span><span class="n">content</span><span class="o">=</span><span class="n">contents</span>
        <span class="n">result</span><span class="o">.</span><span class="n">writeFile</span><span class="p">()</span></div>

<div class="viewcode-block" id="SolutionDirectory.writeDictionaryText"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.writeDictionaryText">[docs]</a>    <span class="k">def</span> <span class="nf">writeDictionaryText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Writes the contents of a dictionary</span>
<span class="sd">        :param directory: Sub-directory of the case</span>
<span class="sd">        :param name: name of the dictionary file</span>
<span class="sd">        :param text: String with the dictionary contents&quot;&quot;&quot;</span>

        <span class="n">theDir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="n">theDir</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">directory</span><span class="p">)</span>

        <span class="n">result</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">name</span><span class="p">),</span><span class="s2">&quot;w&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div>

<div class="viewcode-block" id="SolutionDirectory.getDictionaryContents"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getDictionaryContents">[docs]</a>    <span class="k">def</span> <span class="nf">getDictionaryContents</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:param directory: Sub-directory of the case</span>
<span class="sd">        :param name: name of the dictionary file</span>
<span class="sd">        :return: the contents of the file as a python data-structure&quot;&quot;&quot;</span>

        <span class="n">result</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">theDir</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
            <span class="n">theDir</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">directory</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">name</span><span class="p">)):</span>
            <span class="n">result</span><span class="o">=</span><span class="n">ParsedParameterFile</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">theDir</span><span class="p">,</span><span class="n">name</span><span class="p">))</span><span class="o">.</span><span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">warning</span><span class="p">(</span><span class="s2">&quot;File&quot;</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;does not exist in directory&quot;</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="s2">&quot;of case&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>

<div class="viewcode-block" id="SolutionDirectory.determineVCS"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.determineVCS">[docs]</a>    <span class="k">def</span> <span class="nf">determineVCS</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find out whether this directory is controlled by a VCS and</span>
<span class="sd">        return the abbreviation of that VCS&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;.hg&quot;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="s2">&quot;hg&quot;</span>
        <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;.git&quot;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="s2">&quot;git&quot;</span>
        <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;.svn&quot;</span><span class="p">)):</span>
            <span class="k">return</span> <span class="s2">&quot;svn&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span></div>

<div class="viewcode-block" id="SolutionDirectory.addPostprocDir"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.addPostprocDir">[docs]</a>    <span class="k">def</span> <span class="nf">addPostprocDir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dirName</span><span class="p">,</span><span class="n">fail</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">dirName</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocDirs</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">full</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">dirName</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">full</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">fail</span><span class="p">:</span>
                <span class="n">error</span><span class="p">(</span><span class="n">full</span><span class="p">,</span><span class="s2">&quot;does not exist or is no directory&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__postprocDirs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dirName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="o">=</span><span class="p">{}</span></div>

    <span class="k">def</span> <span class="nf">__classifyDirectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dPath</span><span class="p">):</span>
        <span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">minimum</span><span class="o">=</span><span class="s2">&quot;1e40&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">dPath</span><span class="p">):</span>
            <span class="n">full</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dPath</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">full</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">&lt;</span><span class="nb">float</span><span class="p">(</span><span class="n">minimum</span><span class="p">):</span>
                    <span class="n">minimum</span><span class="o">=</span><span class="n">d</span>
                <span class="n">cnt</span><span class="o">+=</span><span class="mi">1</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">continue</span>
        <span class="k">if</span> <span class="n">cnt</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="n">first</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dPath</span><span class="p">,</span><span class="n">minimum</span><span class="p">)</span>
        <span class="n">hypothesis</span><span class="o">=</span><span class="bp">None</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">first</span><span class="p">):</span>
            <span class="n">ff</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">first</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">ff</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">b</span><span class="p">,</span><span class="n">e</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">==</span><span class="s2">&quot;.xy&quot;</span><span class="p">:</span>
                <span class="n">newHypothesis</span><span class="o">=</span><span class="s2">&quot;sample&quot;</span>
            <span class="k">elif</span> <span class="n">e</span><span class="o">==</span><span class="s2">&quot;.vtk&quot;</span><span class="p">:</span>
                <span class="n">newHypothesis</span><span class="o">=</span><span class="s2">&quot;surface&quot;</span>
            <span class="k">elif</span> <span class="n">e</span><span class="o">==</span><span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;istribution&quot;</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                    <span class="n">newHypothesis</span><span class="o">=</span><span class="s2">&quot;distribution&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newHypothesis</span><span class="o">=</span><span class="s2">&quot;timeline&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">newHypothesis</span><span class="o">=</span><span class="bp">None</span>

            <span class="k">if</span> <span class="n">hypothesis</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
                <span class="n">hypothesis</span><span class="o">=</span><span class="n">newHypothesis</span>
            <span class="k">elif</span> <span class="n">hypothesis</span><span class="o">!=</span><span class="n">newHypothesis</span> <span class="ow">and</span> <span class="n">newHypothesis</span><span class="p">:</span>
                <span class="n">error</span><span class="p">(</span><span class="s2">&quot;Can not decide between&quot;</span><span class="p">,</span><span class="n">hypothesis</span><span class="p">,</span>
                <span class="s2">&quot;and&quot;</span><span class="p">,</span><span class="n">newHypothesis</span><span class="p">,</span><span class="s2">&quot;for&quot;</span><span class="p">,</span><span class="n">full</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">hypothesis</span>

    <span class="k">def</span> <span class="nf">__scanForPostproc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dirName</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">dirName</span><span class="p">)):</span>
            <span class="n">full</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">dirName</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">full</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># we don&#39;t want time directories</span>
                <span class="nb">float</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="n">c</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__classifyDirectory</span><span class="p">(</span><span class="n">full</span><span class="p">)</span>
            <span class="n">use</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">dirName</span><span class="p">,</span><span class="n">d</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">c</span><span class="o">==</span><span class="s2">&quot;timeline&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;timelines&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">use</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">c</span><span class="o">==</span><span class="s2">&quot;sample&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;samples&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">use</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">c</span><span class="o">==</span><span class="s2">&quot;surface&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;surfaces&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">use</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">c</span><span class="o">==</span><span class="s2">&quot;distribution&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;distributions&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">use</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">c</span><span class="o">==</span><span class="bp">None</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">error</span><span class="p">(</span><span class="s2">&quot;Unknown classification&quot;</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="s2">&quot;for&quot;</span><span class="p">,</span><span class="n">full</span><span class="p">)</span>

            <span class="c1"># Pick up additional distributions certain swak-functionobjects generate</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">full</span><span class="p">,</span><span class="s2">&quot;distributions&quot;</span><span class="p">)):</span>
                <span class="n">c</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">__classifyDirectory</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">full</span><span class="p">,</span><span class="s2">&quot;distributions&quot;</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">c</span><span class="o">==</span><span class="s2">&quot;distribution&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;distributions&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">use</span><span class="p">,</span><span class="s2">&quot;distributions&quot;</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__scanPostproc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;timelines&quot;</span><span class="p">:[],</span>
                             <span class="s2">&quot;samples&quot;</span><span class="p">:[],</span>
                             <span class="s2">&quot;distributions&quot;</span><span class="p">:[],</span>
                             <span class="s2">&quot;surfaces&quot;</span><span class="p">:[]}</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocDirs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__scanForPostproc</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pickledData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the pickled data files. Newest first&quot;&quot;&quot;</span>
        <span class="n">dirAndTime</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;pickledData&quot;</span><span class="p">,</span><span class="s2">&quot;pickledUnfinishedData&quot;</span><span class="p">,</span><span class="s2">&quot;pickledStartData&quot;</span><span class="p">]:</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;*.analyzed&quot;</span><span class="p">)):</span>
                <span class="n">pName</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="n">f</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pName</span><span class="p">):</span>
                    <span class="n">dirAndTime</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">pName</span><span class="p">),</span><span class="n">pName</span><span class="p">))</span>
        <span class="n">dirAndTime</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">t</span><span class="p">,</span><span class="n">s</span> <span class="ow">in</span> <span class="n">dirAndTime</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pickledPlots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the pickled plot files. Newest first&quot;&quot;&quot;</span>
        <span class="n">dirAndTime</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;*.analyzed&quot;</span><span class="p">)):</span>
            <span class="n">pName</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">g</span><span class="p">,</span><span class="s2">&quot;pickledPlots&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">pName</span><span class="p">):</span>
                <span class="n">dirAndTime</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">path</span><span class="o">.</span><span class="n">getmtime</span><span class="p">(</span><span class="n">pName</span><span class="p">),</span><span class="n">pName</span><span class="p">))</span>
        <span class="n">dirAndTime</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span> <span class="k">for</span> <span class="n">t</span><span class="p">,</span><span class="n">s</span> <span class="ow">in</span> <span class="n">dirAndTime</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timelines</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return sub-directories that contain timeline-data&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;timelines&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__scanPostproc</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;timelines&quot;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">distributions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return sub-directories that contain distribution-data&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;distributions&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__scanPostproc</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;distributions&quot;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">samples</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return sub-directories that contain sample-data&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;samples&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__scanPostproc</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;samples&quot;</span><span class="p">]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">surfaces</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;surfaces&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__scanPostproc</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__postprocInfo</span><span class="p">[</span><span class="s2">&quot;surfaces&quot;</span><span class="p">]</span>

<div class="viewcode-block" id="SolutionDirectory.getParametersFromFile"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.SolutionDirectory.getParametersFromFile">[docs]</a>    <span class="k">def</span> <span class="nf">getParametersFromFile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get Parameters from the file created by PrepareCase&quot;&quot;&quot;</span>
        <span class="n">fName</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;PyFoamPrepareCaseParameters&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">fName</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">ParsedParameterFile</span><span class="p">(</span><span class="n">fName</span><span class="p">,</span><span class="n">noHeader</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{}</span></div></div>

<div class="viewcode-block" id="ChemkinSolutionDirectory"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.ChemkinSolutionDirectory">[docs]</a><span class="k">class</span> <span class="nc">ChemkinSolutionDirectory</span><span class="p">(</span><span class="n">SolutionDirectory</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Solution directory with a directory for the Chemkin-files&quot;&quot;&quot;</span>

    <span class="n">chemkinName</span> <span class="o">=</span> <span class="s2">&quot;chemkin&quot;</span>

<div class="viewcode-block" id="ChemkinSolutionDirectory.__init__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.ChemkinSolutionDirectory.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">archive</span><span class="o">=</span><span class="s2">&quot;ArchiveDir&quot;</span><span class="p">):</span>
        <span class="n">SolutionDirectory</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">archive</span><span class="o">=</span><span class="n">archive</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addToClone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">chemkinName</span><span class="p">)</span></div>

<div class="viewcode-block" id="ChemkinSolutionDirectory.chemkinDir"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.ChemkinSolutionDirectory.chemkinDir">[docs]</a>    <span class="k">def</span> <span class="nf">chemkinDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;:rtype: str</span>
<span class="sd">        :return: The directory with the Chemkin-Files&quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">chemkinName</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="NoTouchSolutionDirectory"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.NoTouchSolutionDirectory">[docs]</a><span class="k">class</span> <span class="nc">NoTouchSolutionDirectory</span><span class="p">(</span><span class="n">SolutionDirectory</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convenience class that makes sure that nothing new is created&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NoTouchSolutionDirectory.__init__"><a class="viewcode-back" href="../../../api/PyFoam.RunDictionary.SolutionDirectory.html#PyFoam.RunDictionary.SolutionDirectory.NoTouchSolutionDirectory.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">name</span><span class="p">,</span>
                 <span class="n">region</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="n">SolutionDirectory</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                                  <span class="n">name</span><span class="p">,</span>
                                  <span class="n">archive</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                                  <span class="n">paraviewLink</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                                  <span class="n">region</span><span class="o">=</span><span class="n">region</span><span class="p">)</span></div></div>

<span class="c1"># Should work with Python3 and Python2</span>
</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Bernhard F.W. Gschaider.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.6.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>